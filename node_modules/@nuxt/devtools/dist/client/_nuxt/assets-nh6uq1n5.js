import{G as Z,H as ee,_ as te,I as ne,J as O,K as ce,L as pe,M as me,r as W,E as X,v as ae,N as ve,O as fe,c as le,A as ge,a as xe,w as he,P as be,Q as we,R as ye,S as _e,T as $e,g as ke,U as Ce}from"#entry";import{_ as Ve}from"./ncheckbox.vue-bh13p6qy.js";import{_ as Pe}from"./ndropdown.vue-cclblmxb.js";import{_ as Ae}from"./nnavbar.vue-nldppm6i.js";import{p as J,k as j,aj as oe,J as i,a0 as o,a5 as H,u as m,ad as K,Y as d,a1 as t,ac as A,F as L,ah as G,V,a2 as S,W as h,q as U,a3 as se,a9 as D,X as De,j as Ne,au as Fe,a4 as Se}from"./vendor/json-editor-vue-linwxbdb.js";import{_ as Ue}from"./nsection-block-ld7dxama.js";import{_ as Ie}from"./filepath-item.vue-neqjm2ct.js";import{_ as je}from"./code-snippets.vue-c07ituis.js";import{_ as Te}from"./ndrawer.vue-hcqgn10u.js";import{D as Ee}from"./constants-b32h69zq.js";import"./vendor/shiki-hpfujfi3.js";import"./vendor/unocss-c1ookmgn.js";import"./nicon-title.vue-c7m4gyag.js";import"./ncode-block.vue-fnl81rsp.js";import"./client-grni31iy.js";const Be={key:0,"h-full":"","w-full":"",flex:"","items-center":"","justify-center":""},Le={for:"drop-zone-input","text-3xl":"",hover:"text-green cursor-pointer","transition-all":""},ze={key:1,relative:"","h-full":"","w-full":"",grid:"~ rows-[max-content_1fr_max-content]"},Oe={grid:"~ cols-minmax-8rem gap-8","overflow-auto":"",p6:""},Re={flex:"","items-center":"","justify-center":"","of-hidden":"",rounded:"","rounded-t-lg":"","bg-active":"","object-cover":"",class:"aspect-1/1",border:"~ base"},Me=["src"],Ke={flex:"~ gap1","items-center":""},qe={flex:"~ gap-2","items-center":"","justify-center":"",p8:""},Ge=J({__name:"AssetDropZone",props:{modelValue:{type:Boolean,required:!0},folder:{type:String,required:!0}},setup(l){const g=l,f=ee(g,"modelValue"),N=j(),n=j([]);function v(a){N.value=a.target,f.value=!0}function w(a){a.target===N.value&&(f.value=!1)}function T(a){a.preventDefault()}function M(a){a.preventDefault(),b(a.dataTransfer.files)}function b(a){const c=Array.from(a||[]);if(c.length){const x=[],_=n.value.map(u=>u.name);for(const u of c)if(_.includes(u.name)){let P=1;const[$,B]=u.name.split(".");for(;_.includes(`${$} (${P}).${B}`);)P++;const R=`${$}-${P}.${B}`,s=new Blob([u],{type:u.type}),e=new File([s],R,{lastModified:Date.now()});x.push(e),_.push(R)}else u.type===""&&O({message:"Folders are not supported yet",icon:"carbon:face-dissatisfied",classes:"text-orange"}),x.push(u);n.value=[...n.value,...x]}}async function E(){if(ce.value||pe.value)return;me("assets:upload");const a=[];for(const c of n.value){const x=new FileReader;x.readAsDataURL(c);const u=(await new Promise(P=>{x.onload=()=>P(x.result)})).split(";base64,").pop();a.push({path:c.name,encoding:"base64",content:u})}await W.writeStaticAssets(await X(),[...a],g.folder).then(()=>{p(),O({message:"Files uploaded successfully!",icon:"i-carbon:checkmark"})}).catch(c=>{p(),O({message:`Error uploading files: ${c?.message??"unknown"}`,icon:"i-carbon-warning",classes:"text-red"})}),f.value=!1}function q(a){n.value?.splice(a,1)}function z(a){return URL.createObjectURL(a)}function y(a,c){const[x,_]=a.name.split("."),u=c.replace(/\.\w+$/,""),P=`${u}.${_}`;return u.length===0?(alert("File name must be at least 1 characters long"),x):(Object.defineProperty(a,"name",{value:P,writable:!1}),n.value.splice(n.value.indexOf(a),1,a),a)}function r(){n.value=[]}function p(){f.value=!1,r()}return Z("dragenter",v),Z("dragleave",w),Z("dragover",T),Z("drop",M),(a,c)=>{const x=te,_=ne,u=ae,P=oe("tooltip");return o(),i("div",{fixed:"","bottom-0":"","left-13":"","right-0":"","top-0":"","z-10":"","backdrop-blur-20":"","transition-all":"",class:H(m(f)?"opacity-100 visible":"opacity-0 invisible")},[K(d(x,{icon:"carbon-close",title:"Close",absolute:"","right-5":"","top-5":"","z-20":"","text-xl":"",border:!1,onClick:p},null,512),[[P,"Close",void 0,{"bottom-end":!0}]]),n.value?.length?(o(),i("div",ze,[c[4]||(c[4]=t("div",{px6:"",py6:""},[t("h1",{"text-2xl":""}," Upload "),t("p",{"text-sm":"",op50:""}," Drag and drop files to upload ")],-1)),t("div",Oe,[(o(!0),i(L,null,G(n.value,($,B)=>(o(),i("div",{key:$.name,flex:"~ col gap-2",relative:"","h-50":"","w-40":"","items-center":""},[t("div",Re,[t("img",{"h-full":"","w-full":"","rounded-t-lg":"","object-cover":"",src:z($)},null,8,Me)]),t("div",Ke,[d(u,{n:"xs","h-full":"","flex-auto":"","model-value":$.name,"onUpdate:modelValue":R=>y($,R.target.value)},null,8,["model-value","onUpdate:modelValue"]),d(x,{n:"red",icon:"carbon-trash-can","h-full":"","flex-none":"",title:"Remove file",onClick:R=>q(B)},null,8,["onClick"])])]))),128))]),t("div",qe,[n.value.length?(o(),V(x,{key:0,n:"red",onClick:r},{default:h(()=>[d(_,{icon:"carbon-clean"}),c[2]||(c[2]=A(" Clear ",-1))]),_:1})):S("",!0),d(x,{disabled:!n.value.length,n:"primary solid",onClick:E},{default:h(()=>[d(_,{icon:"carbon-cloud-upload"}),c[3]||(c[3]=A(" Upload ",-1))]),_:1},8,["disabled"])])])):(o(),i("div",Be,[t("label",Le,[d(_,{icon:"carbon-cloud-upload","mr-2":""}),c[1]||(c[1]=A(" Drop files here or click to select ",-1))]),t("input",{id:"drop-zone-input",type:"file",multiple:"",hidden:"",onChange:c[0]||(c[0]=$=>b($.target.files))},null,32)]))],2)}}}),Je=J({__name:"AssetFontPreview",props:{asset:{}},setup(l){const g=l,f=U(()=>`devtools-assets-${ve(g.asset)}`);return fe(U(()=>`
  @font-face {
    font-family: '${f.value}';
    src: url('${g.asset.publicPath}');
  }
`)),(N,n)=>(o(),i("div",{"of-hidden":"",style:se({fontFamily:`'${f.value}'`})}," Aa Bb Cc Dd Ee Ff Gg Hh Ii Jj Kk Ll Mm Nn Oo Pp Qq Rr Ss Tt Uu Vv Ww Xx Yy Zz ",4))}}),We={flex:"","items-center":"","justify-center":"","of-hidden":"","bg-active":"","object-cover":"",p1:""},Xe=["src"],Ze={key:2,"i-carbon-document":"","text-3xl":"",op20:""},He={key:3,"w-full":"","self-start":"",p4:""},Qe=["textContent"],Ye={key:4},et=["src","autoplay","controls"],tt={key:5},nt={key:0,"i-carbon-volume-up":"","text-3xl":"",op20:""},ot=["src"],lt={key:6,"i-carbon-help":"","text-3xl":"",op20:""},ie=J({__name:"AssetPreview",props:{asset:{},textContent:{},detail:{type:Boolean}},setup(l){return(g,f)=>{const N=Je;return o(),i("div",We,[l.asset.type==="image"?(o(),i("img",{key:0,src:l.asset.publicPath},null,8,Xe)):l.asset.type==="font"?(o(),V(N,{key:l.asset.publicPath,asset:l.asset,"self-stretch":"",p2:"","text-2xl":""},null,8,["asset"])):l.asset.type==="text"&&!l.textContent?(o(),i("div",Ze)):l.asset.type==="text"&&l.textContent?(o(),i("div",He,[t("pre",{"max-h-10rem":"","of-hidden":"","text-xs":"","font-mono":"",textContent:D(l.textContent)},null,8,Qe)])):l.asset.type==="video"?(o(),i("div",Ye,[t("video",{src:l.asset.publicPath,autoplay:l.detail,controls:l.detail},null,8,et)])):l.asset.type==="audio"?(o(),i("div",tt,[l.detail?(o(),i("audio",{key:1,src:l.asset.publicPath,controls:""},null,8,ot)):(o(),i("div",nt))])):(o(),i("div",lt))])}}}),at={relative:"",flex:"~ col gap-1",hover:"bg-active","items-center":"","of-hidden":"",rounded:"",p2:""},st={"w-full":"","of-hidden":"",truncate:"","ws-nowrap":"","text-center":"","text-xs":""},it=J({__name:"AssetGridItem",props:{asset:{},folder:{}},setup(l){const g=l,f=U(()=>g.folder&&g.asset.path.startsWith(g.folder)?g.asset.path.slice(g.folder.length):g.asset.path);return(N,n)=>{const v=ne,w=ie;return o(),i("button",at,[l.asset.layer?(o(),V(v,{key:0,icon:"i-carbon-layers",absolute:"","right-4":"","top-4":"","bg-primary":""})):S("",!0),d(w,{"h-30":"","w-30":"",rounded:"",border:"~ base",asset:l.asset},null,8,["asset"]),t("div",st,D(f.value),1)])}}}),re=J({__name:"AssetListItem",props:{item:{},index:{default:0},modelValue:{}},setup(l,{emit:g}){const f=l,n=ee(f,"modelValue",g,{passive:!0}),v=U(()=>f.item?.children?.length),w=j(!0),T=U(()=>v.value?"i-carbon-folder":f.item.type==="image"?"i-carbon-image":f.item.type==="video"?"i-carbon-video":f.item.type==="audio"?"i-carbon-volume-up":f.item.type==="font"?"i-carbon-text-small-caps":f.item.type==="text"?"i-carbon-document":f.item.type==="json"?"i-carbon-json":"i-carbon-document-blank");return(M,b)=>{const E=ne,q=re;return o(),i("div",null,[t("button",{flex:"~ gap-2","w-full":"","items-center":"",hover:"bg-active",px4:"",py1:"",style:se({paddingLeft:`calc(1rem + ${l.index*1.5}em)`}),class:H({"bg-active":!v.value&&m(n)?.filePath===l.item?.filePath}),border:"b base",onClick:b[0]||(b[0]=z=>v.value?w.value=!w.value:n.value=l.item)},[t("div",{class:H(T.value)},null,2),t("span",{class:H({"flex items-center":v.value}),"flex-auto":"","text-start":"","text-sm":"","font-mono":""},[A(D(l.item.path)+" ",1),l.item.layer?(o(),V(E,{key:0,icon:"i-carbon-layers","bg-primary":""})):S("",!0)],2),v.value?(o(),V(E,{key:0,icon:"carbon:chevron-right","transform-rotate":w.value?90:0,transition:""},null,8,["transform-rotate"])):S("",!0)],6),w.value?De(M.$slots,"default",{key:0},()=>[(o(!0),i(L,null,G(l.item?.children,z=>(o(),V(q,{key:z.filepath,modelValue:m(n),"onUpdate:modelValue":b[1]||(b[1]=y=>Ne(n)?n.value=y:null),item:z,index:l.index+1},null,8,["modelValue","item","index"]))),128))]):S("",!0)])}}}),rt={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p4:""},ut={flex:"~","items-center":"","justify-center":""},dt={"max-w-full":"","w-full":"","table-fixed":""},ct={flex:"~ gap-1","w-full":"","items-center":""},pt={flex:"~ gap-1","w-full":"","items-center":"","of-hidden":""},mt={"flex-auto":"","of-hidden":"",truncate:"","ws-pre":"","font-mono":""},vt={capitalize:""},ft={key:0},gt={op70:""},xt={flex:"~ gap2 wrap"},ht={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p8:""},bt={flex:"~ gap2 wrap justify-center"},wt={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p8:""},yt={flex:"~ gap2 wrap justify-center"},_t={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p4:""},$t={flex:"","justify-end":"","gap-4":""},kt=J({__name:"AssetDetails",props:{modelValue:{}},setup(l,{emit:g}){const n=ee(l,"modelValue",g,{passive:!0}),v=le(async()=>{if(n.value.type==="image")return W.getImageMeta(await X(),n.value.filePath)}),w=j(!1),T=j(),M=j(0),b=le(async()=>{if(n.value.type!=="text")return;M.value;const s=await W.getTextAssetContent(await X(),n.value.filePath);return T.value=s,s});async function E(){if(b.value!==T.value)try{await W.writeStaticAssets(await X(),[{path:n.value.path,content:T.value,override:!0}],""),w.value=!1,M.value++,O({message:"Updated",icon:"i-carbon-checkmark",classes:"text-green"})}catch(s){console.error(s),O({message:"Something went wrong!",icon:"i-carbon-warning",classes:"text-red"})}}const q=ge(),z=U(()=>(q.value?._installedModules||[]).some(e=>e.meta?.name==="@nuxt/image"||e.meta?.name==="@nuxt/image-edge"||e.meta?.name==="@nuxt/image-nightly")),y=U(()=>{const s=[];if(n.value.type==="image"){const e=v.value?.width?`
  width="${v.value.width}"
  height="${v.value.height}" `:" ";return s.push({lang:"vue-html",code:`<img${e}
  src="${n.value.publicPath}"
/>`,name:"Plain Image"}),z.value&&s.push({lang:"vue-html",code:`<NuxtImg${e}
  src="${n.value.publicPath}"
/>`,name:"Nuxt Img",docs:"https://image.nuxt.com/usage/nuxt-img"},{lang:"vue-html",code:`<NuxtPicture${e}
  src="${n.value.publicPath}"
/>`,name:"Nuxt Picture",docs:"https://image.nuxt.com/usage/nuxt-picture"}),s}return s.push({lang:"html",code:`<a download href="${n.value.publicPath}">
  Download ${n.value.path.split("/").slice(-1)[0]}
</a>`,name:"Download link"}),s}),r=xe(),p=he(),a=be(()=>n.value.mtime),c=U(()=>{const s=n.value.size;return s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(2)} KB`:`${(s/1024/1024).toFixed(2)} MB`}),x=U(()=>{if(!v.value?.width||!v.value?.height)return"";const s=(k,I)=>I?s(I,k%I):k,e=s(v.value.width,v.value.height);return e>3?`${v.value.width/e}:${v.value.height/e}`:""}),_=U(()=>["image","text","video","audio","font"].includes(n.value.type)),u=j(!1);async function P(){try{await W.deleteStaticAsset(await X(),n.value.filePath),n.value=void 0,u.value=!1,O({message:"Asset deleted",icon:"i-carbon-checkmark",classes:"text-green"})}catch(s){console.error(s),O({message:"Something went wrong!",icon:"i-carbon-warning",classes:"text-red"})}}const $=j(!1),B=j("");async function R(){const s=n.value.filePath.split("/"),e=s.slice(-1)[0].split(".").slice(0,-1).join(".");if(!B.value||B.value===e)return O({message:"Please enter a new name",icon:"i-carbon-warning",classes:"text-orange"});try{const k=s.slice(-1)[0].split(".").slice(-1)[0],I=`${s.slice(0,-1).join("/")}/${B.value}.${k}`;await W.renameStaticAsset(await X(),n.value.filePath,I),n.value=void 0,$.value=!1,O({message:"Asset renamed",icon:"i-carbon-checkmark",classes:"text-green"})}catch(k){console.error(k),O({message:"Something went wrong!",icon:"i-carbon-warning",classes:"text-red"})}}return(s,e)=>{const k=ie,I=Ie,F=te,ue=je,Q=we,de=ae,Y=oe("tooltip");return o(),i(L,null,[t("div",rt,[_.value?(o(),i(L,{key:0},[e[13]||(e[13]=t("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[t("div",{"x-divider":""}),t("div",{"flex-none":""}," Preview "),t("div",{"x-divider":""})],-1)),t("div",ut,[d(k,{detail:"","max-h-80":"","min-h-20":"","min-w-20":"","w-auto":"",rounded:"",border:"~ base",asset:m(n),"text-content":m(b)},null,8,["asset","text-content"])])],64)):S("",!0),e[25]||(e[25]=t("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[t("div",{"x-divider":""}),t("div",{"flex-none":""}," Details "),t("div",{"x-divider":""})],-1)),t("table",dt,[t("tbody",null,[t("tr",null,[e[14]||(e[14]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Filepath ",-1)),t("td",null,[t("div",ct,[d(I,{filepath:m(n).filePath,"text-left":""},null,8,["filepath"]),K(d(F,{"flex-none":"",title:"Open in Editor",icon:"carbon-launch",border:!1,onClick:e[0]||(e[0]=C=>m(p)(m(n).filePath))},null,512),[[Y,"Open in Editor"]])])])]),t("tr",null,[e[15]||(e[15]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Public Path ",-1)),t("td",null,[t("div",pt,[t("div",mt,D(m(n).publicPath),1),K(d(F,{"flex-none":"",title:"Copy public path",icon:"carbon-copy",border:!1,onClick:e[1]||(e[1]=C=>m(r)(m(n).publicPath,"assets-public-path"))},null,512),[[Y,"Copy public path"]]),K(d(F,{"flex-none":"",to:m(n).publicPath,icon:"carbon-launch",target:"_blank",border:!1,title:"Open in browser"},null,8,["to"]),[[Y,"Open in browser"]])])])]),t("tr",null,[e[16]||(e[16]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Type ",-1)),t("td",vt,D(m(n).type),1)]),m(v)?.width?(o(),i(L,{key:0},[t("tr",null,[e[17]||(e[17]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Image Size ",-1)),t("td",null,D(m(v).width)+" x "+D(m(v).height),1)]),x.value?(o(),i("tr",ft,[e[18]||(e[18]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Aspect Ratio ",-1)),t("td",null,D(x.value),1)])):S("",!0)],64)):S("",!0),t("tr",null,[e[19]||(e[19]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," File size ",-1)),t("td",null,D(c.value),1)]),t("tr",null,[e[20]||(e[20]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Last modified ",-1)),t("td",null,[A(D(new Date(m(n).mtime).toLocaleString())+" ",1),t("span",gt,"("+D(m(a))+")",1)])])])]),e[26]||(e[26]=t("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[t("div",{"x-divider":""}),t("div",{"flex-none":""}," Actions "),t("div",{"x-divider":""})],-1)),t("div",xt,[d(F,{to:m(n).publicPath,download:"",target:"_blank",icon:"carbon-download",n:"green"},{default:h(()=>[...e[21]||(e[21]=[A(" Download ",-1)])]),_:1},8,["to"]),m(n).type==="text"?(o(),V(F,{key:0,icon:"carbon-edit",n:"cyan",onClick:e[2]||(e[2]=C=>w.value=!w.value)},{default:h(()=>[...e[22]||(e[22]=[A(" Edit ",-1)])]),_:1})):S("",!0),d(F,{icon:"carbon-text-annotation-toggle",n:"blue",onClick:e[3]||(e[3]=C=>$.value=!$.value)},{default:h(()=>[...e[23]||(e[23]=[A(" Rename ",-1)])]),_:1}),d(F,{icon:"carbon-delete",n:"red",onClick:e[4]||(e[4]=C=>u.value=!u.value)},{default:h(()=>[...e[24]||(e[24]=[A(" Delete ",-1)])]),_:1})]),e[27]||(e[27]=t("div",{"flex-auto":""},null,-1)),y.value.length?(o(),V(ue,{key:1,border:"t base","mx--4":"","mb--4":"","code-snippets":y.value},null,8,["code-snippets"])):S("",!0)]),d(Q,{modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=C=>u.value=C)},{default:h(()=>[t("div",ht,[e[30]||(e[30]=t("span",null," Are you sure you want to delete this asset? ",-1)),t("div",bt,[d(F,{icon:"carbon-close",onClick:e[5]||(e[5]=C=>u.value=!1)},{default:h(()=>[...e[28]||(e[28]=[A(" Cancel ",-1)])]),_:1}),d(F,{icon:"carbon-delete",n:"red",onClick:P},{default:h(()=>[...e[29]||(e[29]=[A(" Delete ",-1)])]),_:1})])])]),_:1},8,["modelValue"]),d(Q,{modelValue:$.value,"onUpdate:modelValue":e[9]||(e[9]=C=>$.value=C)},{default:h(()=>[t("div",wt,[d(de,{modelValue:B.value,"onUpdate:modelValue":e[7]||(e[7]=C=>B.value=C),placeholder:"New name",n:"blue"},null,8,["modelValue"]),t("div",yt,[d(F,{icon:"carbon-close",onClick:e[8]||(e[8]=C=>$.value=!1)},{default:h(()=>[...e[31]||(e[31]=[A(" Cancel ",-1)])]),_:1}),d(F,{icon:"carbon-text-annotation-toggle",n:"blue",onClick:R},{default:h(()=>[...e[32]||(e[32]=[A(" Rename ",-1)])]),_:1})])])]),_:1},8,["modelValue"]),m(n).type==="text"?(o(),V(Q,{key:0,modelValue:w.value,"onUpdate:modelValue":e[12]||(e[12]=C=>w.value=C)},{default:h(()=>[t("div",_t,[K(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=C=>T.value=C),placeholder:"Item value...",class:"h-lg w-xl of-auto rounded-lg p-4 text-sm font-mono outline-none",onKeydown:Se(E,["enter"])},null,544),[[Fe,T.value]]),t("div",$t,[d(F,{icon:"carbon-close",onClick:e[11]||(e[11]=C=>w.value=!1)},{default:h(()=>[...e[33]||(e[33]=[A(" Cancel ",-1)])]),_:1}),d(F,{icon:"carbon:save",n:"primary",onClick:E},{default:h(()=>[...e[34]||(e[34]=[A(" save ",-1)])]),_:1})])])]),_:1},8,["modelValue"])):S("",!0)],64)}}}),Ct={"h-full":"","of-auto":""},Vt={"flex-none":"",flex:"~ gap2 items-center","text-lg":""},Pt={flex:"~ items-center justify-center",absolute:"","bottom--1":"","right--1":"","h-4":"","w-4":"","rounded-full":"","bg-primary:30":"","text-8px":""},At={flex:"~ col","w-30":"","of-auto":""},Dt={"text-xs":"",op75:""},Nt={op50:""},Ft={key:0},St={"mt--4":"",px2:"",grid:"~ cols-minmax-8rem"},Ut={key:1,p2:"",grid:"~ cols-minmax-8rem"},It={key:1},Zt=J({__name:"assets",setup(l){const g=ye(),f=j(!1),N=j(""),n=U(()=>new _e(g.value||[],{keys:["path"]})),v=$e(()=>{const y=[];for(const r of g.value||[]){const p=r.path.split(".").pop();p&&!y.find(a=>a.name===p)&&y.push({name:p,value:!0})}return y}),w=U(()=>(N.value?n.value.search(N.value).map(r=>r.item):g.value||[]).filter(r=>{const p=r.path.split(".").pop();return!p||v.some(a=>a.name===p&&a.value)})),T=U(()=>{const y={};for(const r of w.value){const p=`${r.path.split("/").slice(0,-1).join("/")}/`;y[p]||(y[p]=[]),y[p].push(r)}return Object.entries(y).sort(([r],[p])=>r.localeCompare(p))}),M=U(()=>{const y={children:[]},r=(p,a,c)=>{const[x,..._]=a;let u=p.children.find(P=>P.path===x);u||(u={...c,path:x,children:[]},p.children.push(u)),_.length>1?r(u,_,c):_.length===1&&u.children.push({...c,path:_[0]})};return w.value.forEach(p=>{const a=p.path.split("/").filter(c=>c!=="");r(y,a,p)}),y.children}),b=j(),{view:E}=ke("assets");function q(){E.value=E.value==="list"?"grid":"list"}Ce("Escape",()=>{b.value=void 0});const z=j();return(y,r)=>{const p=te,a=Ve,c=Pe,x=Ae,_=Ge,u=it,P=Ue,$=re,B=kt,R=Te,s=oe("tooltip");return o(),i("div",Ct,[d(x,{ref_key:"navbar",ref:z,search:N.value,"onUpdate:search":r[1]||(r[1]=e=>N.value=e),pb2:""},{actions:h(()=>[t("div",Vt,[K(d(p,{icon:"carbon:cloud-upload",title:"File Upload",border:!1,onClick:r[0]||(r[0]=e=>f.value=!f.value)},null,512),[[s,"File Upload",void 0,{"bottom-end":!0}]]),m(v).length?(o(),V(c,{key:0,direction:"end",n:"sm primary"},{trigger:h(({click:e})=>[K(d(p,{icon:"carbon-filter",border:!1,title:"Filter",p3:"","text-lg":"",onClick:k=>e()},null,8,["onClick"]),[[s,"Filter",void 0,{"bottom-end":!0}]]),t("span",Pt,D(m(v).length),1)]),default:h(()=>[t("div",At,[(o(!0),i(L,null,G(m(v),e=>(o(),V(a,{key:e.name,modelValue:e.value,"onUpdate:modelValue":k=>e.value=k,flex:"~ gap-2",rounded:"",px2:"",py2:""},{default:h(()=>[t("span",Dt,D(e.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])]),_:1})):S("",!0),K(d(p,{"text-lg":"",border:!1,icon:m(E)==="grid"?"i-carbon-list":"i-carbon-grid",title:"Toggle view",onClick:q},null,8,["icon"]),[[s,"Toggle View",void 0,{"bottom-end":!0}]])])]),default:h(()=>[t("div",Nt,[N.value?(o(),i("span",Ft,D(w.value.length)+" matched · ",1)):S("",!0),t("span",null,D(m(g)?.length)+" assets in total",1)])]),_:1},8,["search"]),d(_,{modelValue:f.value,"onUpdate:modelValue":r[2]||(r[2]=e=>f.value=e),folder:"/"},null,8,["modelValue"]),m(E)==="grid"?(o(),i(L,{key:0},[T.value.length>1?(o(!0),i(L,{key:0},G(T.value,([e,k])=>(o(),V(P,{key:e,text:e,description:`${k.length} items`,open:k.length<=m(Ee),padding:!1},{default:h(()=>[t("div",St,[(o(!0),i(L,null,G(k,I=>(o(),V(u,{key:I.path,asset:I,folder:e,onClick:F=>b.value=I},null,8,["asset","folder","onClick"]))),128))])]),_:2},1032,["text","description","open"]))),128)):(o(),i("div",Ut,[(o(!0),i(L,null,G(w.value,e=>(o(),V(u,{key:e.path,asset:e,onClick:k=>b.value=e},null,8,["asset","onClick"]))),128))]))],64)):(o(),i("div",It,[(o(!0),i(L,null,G(M.value,(e,k)=>(o(),V($,{key:k,modelValue:b.value,"onUpdate:modelValue":r[3]||(r[3]=I=>b.value=I),item:e},null,8,["modelValue","item"]))),128))])),d(R,{"model-value":!!b.value,"auto-close":"","w-120":"",top:z.value,onClose:r[5]||(r[5]=e=>b.value=void 0)},{default:h(()=>[b.value?(o(),V(B,{key:0,modelValue:b.value,"onUpdate:modelValue":r[4]||(r[4]=e=>b.value=e)},null,8,["modelValue"])):S("",!0)]),_:1},8,["model-value","top"])])}}});export{Zt as default};
